## Backend Assessment  

# Application

We would like you to create a java based backend application using REST.
It should contain the following endpoints;

  * GET /api/stocks (get a list of stocks)  
  * GET /api/stocks/1 (get one stock from the list)  
  * POST /api/stocks/1 (update the price of a single stock)  

The list of stocks should come from a memory database like h2.
The stock object contains at least the fields; id (Number), name (String), currentPrice (Amount) and lastUpdate (Timestamp).
Use the frameworks as you see fit to build and test this.

# Implementation  
Treat this application as a real MVP that should go to production.

# Merge request  
Provide us with a merge request to master of this repository.

# Duration
This assignment should take 4-5 hours at the most.

Good luck!

## Solution Summary
Please note: I have made a slight change in the APIs. I am using PUT to update and POST to create a new Stock which maps better
with rest philosophy.

A Stock object has following properties:
* **Id**: Autogenerated by system and unique for a stock.
* **Symbol**: Symbol of a stock, its provided by client and must be unique, else creation of a stock will fail.
* **Price**: Price of a stock.
* **CreationDate**: Date of creation of a Stock.
* **LastUpdateDate**: Last date when price of the stock was updated.
* **Version**: This is the property maintained by client so that concurrent requests do not make stock data inconsistent.

There are two situations where data concurrency may result in inconsistency:
- **Stock Creation**: This is solved by making database create a record only if the stock symbol does not exist.
- **Price update**: This is solved by versioning the price update of stock. Client makes sure that latest prices has latest version at any given time, as server would not know which request is latest in a distributed environment. Use of timestamp is not advised in such use-case as clock-skew on client side may make data incosistent.
```bash
gradle bootRun
```

### APIs
#### GET /api/stocks  get a list of stocks
```bash
curl -X GET http://localhost:8080/api/stocks
```
  
#### GET /api/stocks/1 (get one stock from the list)
```bash
curl -X GET http://localhost:8080/api/stocks/1
```

#### POST /api/stocks/1 (update the price of a single stock)
```bash
curl -H "Content-Type: application/json" -X PUT http://localhost:8080/api/stocks/1 -d '{
    "price": 90.72,
    "version": 5
}'
```
If caller provides id or name in payload as well, it would be ignored.
NOTE: Ideally we should use PUT for this API to obey the semantics of rest.
#### POST /api/stocks (creates a new stock)
```bash
curl -H "Content-Type: application/json" -X POST http://localhost:8080/api/stocks -d '{
    "name": "Apple Inc",
    "symbol": "AAPL",
    "price": 904.72,
    "version" : 0
}'
``` 
### Testing
**Note:** Unit-tests has been written with good intention which means I have not tried to cover 100% code
which in practice I like to enforce.
I have not written tests for the classes written for demo purpose.

#### Bulk inserting and testing with UI
UI is integrated into this app for demo purposes : [http://localhost:8080/](http://localhost:8080/)
**Sample Data:** 
```bash
curl -H "Content-Type: application/json" -X POST http://localhost:8080/api/stocks/bulk -d '[
  {
    "name": "Apple Inc",
    "symbol": "AAPL",
    "price": 904.72,
    "version" : 0
  },
  {
    "name": "Amazon.com Inc",
    "symbol": "AMZN",
    "price": 722.93,
    "version" : 0
  },
  {
    "name": "Microsoft Corporation",
    "symbol": "MSFT",
    "price": 717.46,
    "version" : 0
  },
  {
    "name": "Facebook Inc",
    "symbol": "FB",
    "price": 421.20,
    "version" : 0
  },
  {
    "name": "JPMorgan Chase & Co",
    "symbol": "JPM",
    "price": 393.19,
    "version" : 0
  },
  {
    "name": "Alphabet Inc ",
    "symbol": "GOOG",
    "price": 377.06,
    "version" : 0
  },
  {
    "name": "Johnson & Johnson",
    "symbol": "JNJ",
    "price": 345.61,
    "version" : 0
  },
  {
    "name": "Bank of America Corp.",
    "symbol": "BAC",
    "price": 324.01,
    "version" : 0
  },
  {
    "name": "Exxon Mobil Corp",
    "symbol": "XOM",
    "price": 320.11,
    "version" : 0
  },
  {
    "name": "Walmart Inc",
    "symbol": "WMT",
    "price": 262.97,
    "version" : 0
  },
  {
    "name": "Cisco Systems Inc",
    "symbol": "CSCO",
    "price": 217.82,
    "version" : 0
  },
  {
    "name": "Berkshire Hathaway Inc",
    "symbol": "BRK.B",
    "price": 269.17,
    "version" : 0
  }
]'
```